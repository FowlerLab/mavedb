{% extends "accounts/profile_base.html" %}

{% block profile_body %}
<h2> Dashboard
  <a onclick="showOptions()"><i class="icon material-icons" style="font-size: 48px;">add_circle_outline</i></a>
  <a class="fade-option" href="{% url 'dataset:experiment_new' %}" style="display:none;">Experiment</a>
  <a class="fade-option" href="#" style="display:none;">|</a>
  <a class="fade-option" href="{% url 'dataset:scoreset_new' %}" style="display:none;">Score Set</a>
</h2>
<hr>

<!-- Instances that user is a ADMIN for -->
<div id="contributor-instances">
	{% if request.user.profile.contributor_instances %}
    <p class="text-muted">
      Below are the instances you contribute to sorted by modification date.
    </p>

    <!-- Experiment Sets -->
    {% if request.user.profile.contributor_experimentsets %}
    <h2 class="underline left-align section-heading">Experiment Sets</h2>
      {% for instance in request.user.profile.contributor_experimentsets %}
        <div class="entry-card hover-card">
          <div class="container">
            <span><b><p class="right-align">{{ instance.urn }}</p></b></span>
            <span><b>Modified: </b></span><p>{{ instance.modification_date }}</p>
            <span><b>Modified by: </b></span><p>{{ instance.modified_by.profile.get_display_name_hyperlink }}</p>
            <span><b>Private: </b></span><p>{{ instance.private }}</p>
          </div>
          <hr>
          <div class="right-align">
            {% if instance in request.user.profile.administrator_instances %}
              <a href="{% url 'accounts:manage_instance' instance.urn %}">
                <i class="material-icons" style="font-size: 46px">group_add</i>
              </a>
            {% endif %}
            {% if instance in request.user.profile.administrator_instances or instance in request.user.profile.editor_instances or instance in request.user.profile.viewer_instances %}
            <a href="{% url 'accounts:view_instance' instance.urn %}">
              <i class="material-icons" style="font-size: 46px">remove_red_eye</i>
            </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    {% endif %}

    <!-- Experiments -->
    {% if request.user.profile.contributor_experiments %}
      <h2 class="underline left-align section-heading">Experiments</h2>
      {% for instance in request.user.profile.contributor_experiments %}
        <div class="entry-card hover-card">
          <div class="container">
            <span><b><p class="right-align">{{ instance.urn }}</p></b></span>
            <span><b>Title: </b></span><p>{{ instance.title }}</p>
            <span><b>Description: </b></span><p>{{ instance.short_description }}</p>
            <span><b>Modified: </b></span><p>{{ instance.modification_date }}</p>
            <span><b>Modified by: </b></span><p>{{ instance.modified_by.profile.get_display_name_hyperlink }}</p>
            <span><b>Private: </b></span><p>{{ instance.private }}</p>
          </div>
          <hr>
            <div class="right-align">
              {% if instance in request.user.profile.administrator_instances %}
                <a href="{% url 'accounts:manage_instance' instance.urn %}">
                  <i class="material-icons" style="font-size: 46px">group_add</i>
                </a>
              {% endif %}
              {% if instance in request.user.profile.administrator_instances or instance in request.user.profile.editor_instances %}
               <a href="{% url 'accounts:edit_instance' instance.urn %}">
                <i class="material-icons" style="font-size: 46px">edit</i>
               </a>
              {% endif %}
              {% if instance in request.user.profile.administrator_instances or instance in request.user.profile.editor_instances or instance in request.user.profile.viewer_instances %}
              <a href="{% url 'accounts:view_instance' instance.urn %}">
                <i class="material-icons" style="font-size: 46px">remove_red_eye</i>
              </a>
              {% endif %}
            </div>
        </div>
      {% endfor %}
    {% endif %}

    <!-- Score Sets -->
    {% if request.user.profile.contributor_scoresets %}
      <h2 class="underline left-align section-heading">Score Sets</h2>
      {% for instance in request.user.profile.contributor_scoresets %}
        <div class="entry-card hover-card">
          <div class="container">
            <span><b><p class="right-align">{{ instance.urn }}</p></b></span>
            <span><b>Title: </b></span><p>{{ instance.title }}</p>
            <span><b>Description: </b></span><p>{{ instance.short_description }}</p>
            <span><b>Modified: </b></span><p>{{ instance.modification_date }}</p>
            <span><b>Modified by: </b></span><p>{{ instance.modified_by.profile.get_display_name_hyperlink }}</p>
            <span><b>Private: </b></span><p>{{ instance.private }}</p>
          </div>
          <hr>
            <div class="right-align">
              {% if instance in request.user.profile.administrator_instances %}
                <a href="{% url 'accounts:manage_instance' instance.urn %}">
                  <i class="material-icons" style="font-size: 46px">group_add</i>
                </a>
              {% endif %}
              {% if instance in request.user.profile.administrator_instances or instance in request.user.profile.editor_instances %}
               <a href="{% url 'accounts:edit_instance' instance.urn %}">
                <i class="material-icons" style="font-size: 46px">edit</i>
               </a>
              {% endif %}
              {% if instance in request.user.profile.administrator_instances or instance in request.user.profile.editor_instances or instance in request.user.profile.viewer_instances %}
              <a href="{% url 'accounts:view_instance' instance.urn %}">
                <i class="material-icons" style="font-size: 46px">remove_red_eye</i>
              </a>
              {% endif %}
            </div>
        </div>
      {% endfor %}
    {% endif %}

	{% else %}
		<p class="text-muted">
      You are not an contributor on any entries
    </p>
	{% endif %}
</div>
	
{% endblock profile_body %}
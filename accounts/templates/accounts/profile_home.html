{% extends "accounts/profile_base.html" %}

{% block profile_body %}

<h3> Welcome, {{ request.user.profile.get_full_name }} </h3>
<hr>

<!-- Instances that user is a ADMIN for -->
<div id="admin-instances">
	<h5> Editable entries </h5>
	{% if request.user.profile.editable_instances %}
		<ul style="list-style: none">
			{% for instance in request.user.profile.editable_instances %}

        <div class="entry-card hover-card">
          <div style="display: inline-flex">
            <li> <a href="{% url 'accounts:view_instance' instance.urn %}">
              {{instance.urn}}</a>
            </li>
            <li style="padding-left:10px;"><b>&middot;</b></li>

            {% if request.user in instance.administrators %}
              <li style="padding-left:10px;">
                <a href="{% url 'accounts:manage_instance' instance.urn %}">
                  Manage
                </a>
              </li>
            {% endif %}

            {% if instance.class_name != 'experimentset' %}
            <li style="padding-left:10px;"><b>&middot;</b></li>
            <li style="padding-left:10px;">
              <a href="{% url 'accounts:edit_instance' instance.urn %}">
                Edit
              </a>
            </li>
            {% endif %}
          </div>

          <!-- Information -->
          <ul style="list-style: none">
            <li>
              <div style="display: inline-flex">
                <label style="margin-right:5px;">Last edited on: </label>
                <div>{{ instance.last_edit_date }}</div>
              </div>
            </li>
            <li>
              <div style="display: inline-flex">
                <label style="margin-right:5px;">Private: </label>
                <div> {{ instance.private }} </div>
              </div>
            </li>
          </ul>
        </div>
			{% endfor %}
		</ul>
	{% else %}
		<p class="text-muted">
      You are not an administrator/contributor on any entries
    </p>
	{% endif %}
	<hr>
</div>

<!-- Instances that are VIEW ONLY for user -->
<div id="view-only-instances">
	<h5> View only entries </h5>
	{% if request.user.profile.viewer_instances %}
		<ul style="list-style: none">
			{% for instance in request.user.profile.viewer_instances %}

        <div class="entry-card hover-card">
          <div style="display: inline-flex">
            <a href="{% url 'accounts:view_instance' instance.urn %}">
              {{instance.urn}}
            </a>
          </div>

          <!-- Information -->
          <ul style="list-style: none">
            <li>
              <div style="display: inline-flex">
                <label style="margin-right:5px;">Last edited on: </label>
                <div>{{ instance.last_edit_date }}</div>
              </div>
            </li>
            <li>
              <div style="display: inline-flex">
                <label style="margin-right:5px;">Private: </label>
                <div> {{ instance.private }} </div>
              </div>
            </li>
          </ul>

        </div>
			{% endfor %}
		</ul>
	{% else %}
		<p class="text-muted"> You have no view only entries </p>
	{% endif %}
</div>
	
{% endblock profile_body %}
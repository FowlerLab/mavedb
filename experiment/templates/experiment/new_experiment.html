{% extends "main/base.html" %}

{% block body %}
<div class="row">
	<div class="col-md-2 border border-top-0 border-bottom-0 border-left-0 border-secondary">
		<h3>Create new experiment</h3>
	</div>
	
	<div class="col-md-8 mx-3">
		<form action="{% url 'experiment:experiment_new' %}" method="POST">
			{% csrf_token %}
			
			{% if experiment_form.non_field_errors %}
			<div class="non-field-errors">
				{{ experiment_form.non_field_errors }}
			</div>
			{% endif %}

			<div class="model-form">
				{% for field in experiment_form %}
					<div class="field-error">{{ field.errors }}</div>
					<label for="{{ field.id_for_label }}">{{ field.label }}</label>
					{{ field }}
				{% endfor %}
			<br><hr>

			<div class="reference_mapping-forms">
				<h4> Reference maps 
					<input type="button" value="+" id="add_reference_mapping">
					<input type="button" value="-" id="remove_reference_mapping">
				</h4>
				<div id="reference_mapping-form-set">
					{{ reference_mapping_formset.management_form }}
					{% if not reference_mapping_formset|length %}
						<div id='reference_mapping-empty-set'>
							<p>I'll add reference maps later.<p><hr>
						</div>
					{% else %}
						<div id='reference_mapping-empty-set' hidden>
							<p>I'll add reference maps later.<p><hr>
						</div>
					{% endif %}
					{% for form in reference_mapping_formset %}
						<div id="reference_mapping-formset-{{ forloop.counter }}">
							{{ form.as_table }}
						<hr>
						</div>
					{% endfor %}
				</div>
			</div>
			<div id="reference_mapping-empty-form" style="display:none">
				{{ reference_mapping_formset.empty_form.as_table }}
			</div>
			
			<input class="u-pull-right" style="width: 200px;" 
						type="submit" name="submit" value="submit">
		</form>
	</div>
</div>
<br><br>
{% endblock body %}
{% extends "main/base.html" %}

{% block body %}
<div class="row">
	
	<!-- Sidebar -->
	<div class="two columns">
		<h5> {{ experiment.accession }} </h5>
		<p> 
			Member of experiment set 
			<a href="{% url 'experiment:experimentset_detail' experiment.experimentset.accession %}">
				{{ experiment.experimentset }}
			</a>
		</p>
	</div>

	<!-- Vertical divider -->
	<div class="one column" style="margin-left:1%">
			<div style="width:1px;height:100%;background-color:#E1E1E1;">&nbsp;</div>
	</div>	
	
	<!-- Content -->
	<div class="nine columns" style="margin-left: -1%">
		
		<h3> Abstract </h3>
		<p> {{ experiment.md_abstract|safe|escape|default:"Not provided" }} </p>
		<hr>
		
		<h3> Method description </h3>
		<p> {{ experiment.md_method_desc|safe|escape|default:"Not provided" }} </p>
		<hr>
		
		<h3> Publication information </h3>
		<span style="font-weight: 600;">Created on:</span>
			<span>{{ experiment.creation_date }}</span>
		<br>
		<span style="font-weight: 600;">Created by:</span>
			<span>{{ experiment.created_by|default:"None" }}</span>
		<br>
		<span style="font-weight: 600;">Last edited:</span>
			<span>{{ experiment.last_edit|default:"None" }}</span>
		<br>
		<span style="font-weight: 600;">Last edited by:</span>
			<span>{{ experiment.last_edit_by|default:"None" }}</span>
		<br>
		<span style="font-weight: 600;">Authors:</span>
			<span>{{ experiment.get_authors|default:"None" }}</span>
		<br>	
		<span style="font-weight: 600;">DOI:</span>
			<span>{{ experiment.doi_id|default:"None" }}</span>
		<br>
		<span style="font-weight: 600;">SRA:</span>
			<span>{{ experiment.sra_id|default:"None" }}</span>
		<br>
		<span style="font-weight: 600;">Reviewed:</span>
			<span>
				{% if experiment.approved %}
					{{ "Yes "}}
				{% else %}
					{{ "No" }}
				{% endif %}
			</span>
		<br>
		<hr>
		
		<h3> Experiment information </h3>
		<span style="font-weight: 600;">Target: </span>
			<span>{{ experiment.target }}</span>
		<br>
		<span style="font-weight: 600;">Target organism: </span>
			<em>{{ experiment.get_target_organism|default:"Not provided" }}</em>
		<br>
		<div style="word-wrap: break-word; word-break: break-all;">
			<span style="font-weight: 600">Wild type sequence: </span>
				<span>{{ experiment.wt_sequence }}</span>
		</div>
		<span style="font-weight: 600;">Keywords: </span>
			<span>{{ experiment.get_keywords|default:"Not provided" }}</span>
		<br>
		<span style="font-weight: 600;">External accessions: </span>
			<span>{{ experiment.get_other_accessions|default:"Not provided" }}</span>
		<br>
		<span style="font-weight: 600;">Score sets: </span>
			{% for scoreset in experiment.scoreset_set.all %}
				<a href="{% url 'scoreset:scoreset_detail' scoreset.accession %}">
					{{ scoreset.accession }}
				</a>,
			{% endfor %}
		<br>
		<hr>
		
		<h3>Reference mappings</h3>
		{% if not experiment.get_ref_mappings %}
			<p> No maps have been specified for this experiment. </p>
		{% else %}
			<table>
				<thead>
					<tr>
						<th>Reference</th>
						<th>Is alternate</th>
						<th>Target start</th>
						<th>Target end</th>
						<th>Reference start</th>
						<th>Reference end</th>
					</tr>
				</thead>
				<tbody>
					{% for map in experiment.get_ref_mappings %}
					<tr>
						<td>{{ map.reference }}</td>
						<td>{{ map.is_alternate }}</td>
						<td>{{ map.target_start }}</td>
						<td>{{ map.target_end }}</td>
						<td>{{ map.reference_start }}</td>
						<td>{{ map.reference_end }}</td>
					</tr>			
					{% endfor %}
				</tbody>
			</table>
		{% endif %}
		<br>	
	
	</div>
</div>
{% endblock body %}
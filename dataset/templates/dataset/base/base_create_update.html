{% extends "main/base.html" %}

{% load static %}
{% load widget_tweaks %}
{% load i18n %}

{% block body %}

<div class="row">
	<div class="form-sidebar col-xl-2 border-right">
		<h3 class="sidebar-title">
			{% block side-bar-title %}{% endblock %}
		</h3>
		{% if experiment_urn|default:"" %}
			<a href="{% url "accounts:profile" %}"><h4 class="mt-4">Skip for now</h4></a>
		{% endif %}
		<p class="mt-4">
      {% block side-bar-instructions %}{% endblock %}
		</p>
		<p>* indicates a required field</p>
	</div>

	<div class="form-body col-xl-8 col-lg-12 col-md-12 pl-4">
		<form action="{% block form-action %}{% endblock %}" method="POST"
          enctype="multipart/form-data">
			{% csrf_token %}
			
			<div id="keywords-to-add" hidden>{{ repop_keywords|default:"" }}</div>
			<div id="sra-identifiers-to-add" hidden>{{ repop_sra_identifiers|default:"" }}</div>
			<div id="doi-identifiers-to-add" hidden>{{ repop_doi_identifiers|default:"" }}</div>
			<div id="pubmed-identifiers-to-add" hidden>{{ repop_pubmed_identifiers|default:"" }}</div>
      <div id="uniprot-identifier-to-add" hidden>{{ repop_uniprot_identifier|default:"" }}</div>
      <div id="ensembl-identifier-to-add" hidden>{{ repop_ensembl_identifier|default:"" }}</div>
      <div id="refseq-identifier-to-add" hidden>{{ repop_refseq_identifier|default:"" }}</div>

      {% block top-instructions %}

      {% endblock %}

      {% block form-block %}
        {#  Forms are rendered here  #}
      {% endblock %}
      <hr>

  		<div class="row">
        <div class="col-auto">
          <input id='submit-form' class="btn btn-outline-dark white-button" type="submit" value="Submit"
                 name="save" style="width:150px;margin-bottom:5px;" data-toggle="tooltip"
                 data-placement="top|right|bottom|left" title="Save your changes without publishing.">
        </div>

        {% block extra-buttons-block %}
          {#  Form buttons are rendered here #}
        {% endblock %}

        <div class="col-auto">
          <input class="btn btn-outline-dark white-button" type="button" value="Cancel" name="save"
                 style="width:150px;margin-bottom:5px;" data-toggle="tooltip"
                 data-placement="top|right|bottom|left" onclick="cancelSubmission()"
                 title="Cancel your submission.">
        </div>
			</div>

    </form>
	</div>
</div>
{% endblock body %}


{% block extra_scripts %}
  <script type="text/javascript">
  $("document").ready(function() {

    init_select2();

    // Re-add any external_accession, keywords or target organism
    // back to failed form submission
    repopulateSelect(
      "#id_keywords",
      "#keywords-to-add"
    );
    repopulateSelect(
      "#id_sra_ids",
      "#sra-identifiers-to-add"
    );
    repopulateSelect(
      "#id_doi_ids",
      "#doi-identifiers-to-add"
    );
    repopulateSelect(
      "#id_pubmed_ids",
      "#pubmed-identifiers-to-add"
    );
    repopulateSelect(
      "#id_uniprot-offset-identifier",
      "#uniprot-identifier-to-add"
    );
    repopulateSelect(
      "#id_ensembl-offset-identifier",
      "#ensembl-identifier-to-add"
    );
    repopulateSelect(
      "#id_refseq-offset-identifier",
      "#refseq-identifier-to-add"
    );

  });
</script>
{% endblock %}